const manorHours=document.querySelector(".timer__hours"),manorMinutes=document.querySelector(".timer__minutes"),manorSeconds=document.querySelector(".timer__seconds");let setMin=+localStorage.getItem("min")||6,setMs=+localStorage.getItem("ms")||250;function timer(){const e=new Date;let t=e.getHours(),n=e.getMinutes(),s=e.getSeconds(),c=e.getMilliseconds();n===setMin&&0===s&&c>setMs&&document.querySelector(".main").classList.add("active"),manorHours.textContent=t<=9?"0"+t:t,manorMinutes.textContent=n<=9?"0"+n:n,manorSeconds.textContent=s<=9?"0"+s:s}setInterval(timer,1);const timeControl=document.querySelector(".timer__wrap");timeControl.addEventListener("contextmenu",(e=>{e.preventDefault(),document.getElementById("timecontrol").classList.remove("hide")})),timeControl.addEventListener("touchstart",(e=>{document.getElementById("timecontrol").classList.remove("hide")})),document.querySelector(".time-control__close").addEventListener("click",(()=>{document.getElementById("timecontrol").classList.add("hide")})),window.addEventListener("click",(e=>{e.target.classList.contains("main")&&document.getElementById("timecontrol").classList.add("hide")}));const minInput=document.getElementById("min-input"),minPlus=document.getElementById("min-plus"),minMinus=document.getElementById("min-minus");minInput.value=setMin,minInput.addEventListener("input",(function(){let e=this.value;e=e.replace(/[^0-9]/gi,""),this.value.length>=3&&(e=this.value.slice(0,-1),this.value=e),this.value>=60&&(this.value=""),setMin=+e,localStorage.setItem("min",setMin)})),minPlus.addEventListener("click",(()=>{let e=+minInput.value;e<59&&(minInput.value=e+1,setMin=e+1,localStorage.setItem("min",setMin))})),minMinus.addEventListener("click",(()=>{let e=+minInput.value;e>0&&(minInput.value=e-1,setMin=e-1,localStorage.setItem("min",setMin))}));const msInput=document.getElementById("ms-input"),msPlus=document.getElementById("ms-plus"),msMinus=document.getElementById("ms-minus");msInput.value=setMs,msInput.addEventListener("input",(function(){let e=this.value;e=e.replace(/[^0-9]/gi,""),this.value.length>=4&&(e=this.value.slice(0,-1),this.value=e),setMs=+e,localStorage.setItem("ms",setMs)})),msPlus.addEventListener("click",(()=>{let e=+msInput.value;e<999&&(msInput.value=e+1,setMs=e+1,localStorage.setItem("ms",setMs))})),msMinus.addEventListener("click",(()=>{let e=+msInput.value;e>0&&(msInput.value=e-1,setMs=e-1,localStorage.setItem("ms",setMs))}));const fruitBtn=document.querySelector(".fruit-btn"),fruitCloseBtn=document.querySelector(".fruit-close-btn");fruitBtn.addEventListener("click",(()=>{document.querySelector(".fruits").classList.add("open")})),fruitCloseBtn.addEventListener("click",(()=>{document.querySelector(".fruits").classList.remove("open")}));const fruitsTownBtn=document.querySelectorAll(".fruits-towns__btn"),fruitsTownItems=document.querySelectorAll(".fruits__items");fruitsTownBtn.forEach(((e,t)=>{e.addEventListener("click",(()=>{fruitsTownBtn.forEach((e=>e.classList.remove("active"))),fruitsTownItems.forEach((e=>e.classList.remove("open"))),e.classList.add("active"),fruitsTownItems[t].classList.add("open")}))}));const calcOpenBtn=document.querySelector(".calc-btn"),calcCloseBtn=document.querySelector(".calc-close-btn");calcOpenBtn.addEventListener("click",(()=>{document.querySelector(".calc").classList.add("open")})),calcCloseBtn.addEventListener("click",(()=>{document.querySelector(".calc").classList.remove("open")}));const calcButton=document.querySelector(".calc__btn");calcButton.addEventListener("click",(()=>{const e=document.querySelector(".calc__fruits").dataset.count,t=Number(document.querySelector(".calc__quantity").value),n=Number(document.querySelector(".calc__cost").value),s=document.querySelector(".calc__output-quantity span"),c=document.querySelector(".calc__output-res span"),o=Math.floor(t*n/e),l=Math.ceil(o*e/n);c.textContent=`${o} ${document.querySelector(".calc__fruits").textContent}`,isNaN(l)?s.textContent=0:s.textContent=l}));const regExp=/\D/;document.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(function(){this.value=this.value.replace(regExp,"")}))}));const resItems=document.querySelectorAll(".resources__item"),selectItem=document.querySelector(".calc__fruits"),selectItemImg=document.querySelector(".calc__fruits img"),selectItemDescr=document.querySelector(".calc__fruits p");selectItem.addEventListener("click",(()=>{document.querySelector(".resources").classList.add("open")})),resItems.forEach((e=>e.addEventListener("click",(function(){selectItem.dataset.count=this.dataset.count,selectItemDescr.textContent=this.dataset.descr,selectItemImg.src=`./images/resources/${this.dataset.img}`,selectItemImg.alt=this.dataset.descr,document.querySelector(".resources").classList.remove("open")}))));const calc=document.querySelector(".calc");document.addEventListener("keydown",(e=>{calc.classList.contains("open")&&"Escape"==e.key&&document.querySelector(".resources").classList.remove("open")}));const resCloseBtn=document.querySelector(".resources__btn-close");resCloseBtn.addEventListener("click",(()=>{document.querySelector(".resources").classList.remove("open")}));const mobileWidth=window.innerWidth;mobileWidth<=420&&(document.querySelector(".calc__quantity").type="number",document.querySelector(".calc__cost").type="number");