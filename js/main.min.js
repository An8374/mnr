const manorHours=document.querySelector(".timer__hours"),manorMinutes=document.querySelector(".timer__minutes"),manorSeconds=document.querySelector(".timer__seconds");let setMs=+localStorage.getItem("ms")||250;function timer(){const e=new Date;let t=e.getHours(),c=e.getMinutes(),s=e.getSeconds(),n=e.getMilliseconds();6===c&&0===s&&n>setMs&&document.querySelector(".main").classList.add("active"),manorHours.textContent=t<=9?"0"+t:t,manorMinutes.textContent=c<=9?"0"+c:c,manorSeconds.textContent=s<=9?"0"+s:s}setInterval(timer,1);const msInput=document.getElementById("ms-input"),msPlus=document.getElementById("ms-plus"),msMinus=document.getElementById("ms-minus");msInput.value=setMs,msInput.addEventListener("input",(function(){let e=this.value;e=e.replace(/[^0-9]/gi,""),this.value.length>=4&&(e=this.value.slice(0,-1),this.value=e),setMs=+e,localStorage.setItem("ms",setMs)})),msPlus.addEventListener("click",(()=>{let e=+msInput.value;e<999&&(msInput.value=e+1,setMs=e+1,localStorage.setItem("ms",setMs))})),msMinus.addEventListener("click",(()=>{let e=+msInput.value;e>0&&(msInput.value=e-1,setMs=e-1,localStorage.setItem("ms",setMs))}));const fruitBtn=document.querySelector(".fruit-btn"),fruitCloseBtn=document.querySelector(".fruit-close-btn");fruitBtn.addEventListener("click",(()=>{document.querySelector(".fruits").classList.add("open")})),fruitCloseBtn.addEventListener("click",(()=>{document.querySelector(".fruits").classList.remove("open")}));const fruitsTownBtn=document.querySelectorAll(".fruits-towns__btn"),fruitsTownItems=document.querySelectorAll(".fruits__items");fruitsTownBtn.forEach(((e,t)=>{e.addEventListener("click",(()=>{fruitsTownBtn.forEach((e=>e.classList.remove("active"))),fruitsTownItems.forEach((e=>e.classList.remove("open"))),e.classList.add("active"),fruitsTownItems[t].classList.add("open")}))}));const calcOpenBtn=document.querySelector(".calc-btn"),calcCloseBtn=document.querySelector(".calc-close-btn");calcOpenBtn.addEventListener("click",(()=>{document.querySelector(".calc").classList.add("open")})),calcCloseBtn.addEventListener("click",(()=>{document.querySelector(".calc").classList.remove("open")}));const calcButton=document.querySelector(".calc__btn");calcButton.addEventListener("click",(()=>{const e=document.querySelector(".calc__fruits").dataset.count,t=Number(document.querySelector(".calc__quantity").value),c=Number(document.querySelector(".calc__cost").value),s=document.querySelector(".calc__output-quantity span"),n=document.querySelector(".calc__output-res span"),o=Math.floor(t*c/e),r=Math.ceil(o*e/c);n.textContent=`${o} ${document.querySelector(".calc__fruits").textContent}`,isNaN(r)?s.textContent=0:s.textContent=r}));const regExp=/\D/;document.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(function(){this.value=this.value.replace(regExp,"")}))}));const resItems=document.querySelectorAll(".resources__item"),selectItem=document.querySelector(".calc__fruits"),selectItemImg=document.querySelector(".calc__fruits img"),selectItemDescr=document.querySelector(".calc__fruits p");selectItem.addEventListener("click",(()=>{document.querySelector(".resources").classList.add("open")})),resItems.forEach((e=>e.addEventListener("click",(function(){selectItem.dataset.count=this.dataset.count,selectItemDescr.textContent=this.dataset.descr,selectItemImg.src=`./images/resources/${this.dataset.img}`,selectItemImg.alt=this.dataset.descr,document.querySelector(".resources").classList.remove("open")}))));const calc=document.querySelector(".calc");document.addEventListener("keydown",(e=>{calc.classList.contains("open")&&"Escape"==e.key&&document.querySelector(".resources").classList.remove("open")}));const resCloseBtn=document.querySelector(".resources__btn-close");resCloseBtn.addEventListener("click",(()=>{document.querySelector(".resources").classList.remove("open")}));